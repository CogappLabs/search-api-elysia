---
title: Autocomplete
description: Combined autocomplete endpoint for document hits and facet value matches.
---

import AutocompleteDemo from "@/components/AutocompleteDemo.tsx";

## Try it

<AutocompleteDemo client:only="react" />

```
GET /:handle/autocomplete
```

Combined autocomplete: searches document titles and optionally searches facet value names in a single request. When `facets` is provided, each field's values are searched by name (substring match), not aggregated from matching documents.

## Query parameters

| Parameter          | Type     | Default | Description                                                                 |
| ------------------ | -------- | ------- | --------------------------------------------------------------------------- |
| `q`                | `string` | `""`    | Autocomplete query prefix.                                                  |
| `perPage`          | `number` | `5`     | Maximum number of document hits to return (1–20).                           |
| `facets`           | `string` | —       | Comma-separated list of facet fields to search values by name.              |
| `maxFacetsPerField`| `number` | `4`     | Maximum facet values returned per field (1–20).                             |

## Response

```json
{
  "hits": [
    {
      "objectID": "515",
      "_index": "museum_collections",
      "_score": 8.2,
      "_highlights": {},
      "title": "Stonehenge"
    }
  ],
  "totalHits": 12,
  "facets": {
    "country": [
      { "value": "Scotland", "count": 18 }
    ]
  }
}
```

| Field      | Type                           | Description                                          |
| ---------- | ------------------------------ | ---------------------------------------------------- |
| `hits`     | `SearchHit[]`                  | Array of matching documents.                         |
| `totalHits`| `number`                       | Total number of matching documents.                  |
| `facets`   | `Record<string, FacetValue[]>?`| Facet values matching the query by name (when `facets` param is provided). |

Only `hits`, `totalHits`, and optionally `facets` are returned — no `page`, `perPage`, `totalPages`, or `suggestions`.

## Examples

```bash
# Basic autocomplete
curl "http://localhost:3000/collections/autocomplete?q=ston"

# Limit to 3 results
curl "http://localhost:3000/collections/autocomplete?q=cas&perPage=3"

# With facet value search
curl "http://localhost:3000/collections/autocomplete?q=sc&facets=country,region"

# More facet values per field
curl "http://localhost:3000/collections/autocomplete?q=sc&facets=country&maxFacetsPerField=8"
```

## Error responses

| Status | Condition              |
| ------ | ---------------------- |
| `401`  | Missing or invalid bearer token |
| `404`  | Index handle not found |
